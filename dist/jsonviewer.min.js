var JsonInterperter=function(){function n(n){n===void 0&&(n="collapsed");this.collapseClass=n}return n.prototype.collapse=function(n,t){var f=t.target,i=$(f).toggleClass(this.collapseClass).siblings("ul.json-dict, ol.json-array"),r,u;i.toggle();i.is(":visible")?i.siblings(".json-placeholder").remove():(r=i.children("li").length,u=r+(r>1?" items":" item"),i.after('<a href class="json-placeholder">'+u+"<\/a>"))},n.prototype.isCollapsable=function(n){return n instanceof Object&&Object.keys(n).length>0},n.prototype.isUrl=function(n){return/^(https?:\/\/|ftps?:\/\/)?([a-z0-9%-]+\.){1,}([a-z0-9-]+)?(:(\d{1,5}))?(\/([a-z0-9\-._~:/?#[\]@!$&'()*+,;=%]+)?)?$/i.test(n)},n.prototype.renderHtml=function(n,t){var f,e,i="",r,o,u,s;if(typeof n=="string")n=n.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&apos;").replace(/"/g,"&quot;"),((f=t)===null||f===void 0?void 0:f.withLinks)&&this.isUrl(n)?i+='<a href="'+n+'" class="json-string" target="_blank">'+n+"<\/a>":(n=n.replace(/&quot;/g,"\\&quot;"),i+='<span class="json-string">"'+n+'"<\/span>');else if(typeof n=="number")i+='<span class="json-literal">'+n+"<\/span>";else if(typeof n=="boolean")i+='<span class="json-literal">'+n+"<\/span>";else if(n===null)i+='<span class="json-literal">null<\/span>';else if(n instanceof Array)if(n.length>0){for(i+='[<ol class="json-array">',r=0;r<n.length;++r)i+="<li>",this.isCollapsable(n[r])&&(i+='<a href="#" class="json-toggle" data-bind="click: collapse"><\/a>'),i+=this.renderHtml(n[r],t),r<n.length-1&&(i+=","),i+="<\/li>";i+="<\/ol>]"}else i+="[]";else if(typeof n=="object")if(o=Object.keys(n).length,o>0){i+='{<ul class="json-dict">';for(u in n)Object.prototype.hasOwnProperty.call(n,u)&&(i+="<li>",s=((e=t)===null||e===void 0?void 0:e.withQuotes)?'<span class="json-string">"'+u+'"<\/span>':u,i+=this.isCollapsable(n[u])?'<a href="#" class="json-toggle"  data-bind="click: collapse">'+s+"<\/a>":s,i+=": "+this.renderHtml(n[u],t),--o>0&&(i+=","),i+="<\/li>");i+="<\/ul>}"}else i+="{}";return i},n}();ko.bindingHandlers.htmlWithBinding={init:function(){return{controlsDescendantBindings:!0}},update:function(n,t,i,r,u){n.innerHTML=ko.unwrap(t());ko.applyBindingsToDescendants(u,n)}};var __extends=this&&this.__extends||function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),__assign=this&&this.__assign||function(){return __assign=Object.assign||function(n){for(var t,r,i=1,u=arguments.length;i<u;i++){t=arguments[i];for(r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},__assign.apply(this,arguments)},JsonViewer=function(n){function t(t){var i=n.call(this)||this;return t=__assign(__assign({},t),{collapsed:!1,rootCollapsable:!0,withQuotes:!1,withLinks:!0}),i.jsonString=ko.observable(),i.jsonHtml=ko.pureComputed(function(){var n=i.jsonString(),r;if(n)try{return r=eval("("+n+")"),i.renderHtml(r,t)}catch(u){return i.renderHtml(n,t)}return null}),ko.applyBindings(i,document.getElementById("app")),i}return __extends(t,n),t}(JsonInterperter);